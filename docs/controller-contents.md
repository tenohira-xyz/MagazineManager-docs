# 目次画面のコントローラ
- クラス名：`ContentListController`

## 初期表示
- リクエストメソッド：GET
- リクエストURL：`/contents/{雑誌ID}`
- 実行権限：全て

### 処理内容
1. 「雑誌ID」を[雑誌サービスクラスの存在チェックメソッド](service-magazine.md#存在チェックメソッド（雑誌ID）)に渡し、指定した雑誌情報が存在するかチェックする。
    - 存在しない場合、[雑誌非存在例外](exception.md#雑誌非存在例外)を発生させる。発生した例外は[ハンドラメソッド](controller-contents.md#雑誌非存在例外ハンドラ)で処理する。
1. 「雑誌ID」を[記事サービスクラスの複数レコード取得メソッド](service-article.md#複数レコード取得メソッド)に渡し、指定した雑誌の記事のリストを取得する。
1. 取得した情報を目次画面のフォームに詰める。
1. [目次画面のView](screen-contents.md#View名)を返す。

## 一覧の入力欄を1行削除
- リクエストメソッド：POST
- リクエストURL：`/contents/{雑誌ID}/edit`
- パラメータ：`remove`
- 実行権限：管理者権限

### 処理内容
1. 記事オブジェクトのリストから指定した位置にあるオブジェクトを削除する。
1. [目次画面のView](screen-contents.md#View名)を返す。

## 一覧の入力欄を1行追加
- リクエストメソッド：POST
- リクエストURL：`/contents/{雑誌ID}/edit`
- パラメータ：`add`
- 実行権限：管理者権限

### 処理内容
1. 記事オブジェクトのリストの一番下にオブジェクトを追加する。
1. [目次画面のView](screen-contents.md#View名)を返す。

## 登録処理
- リクエストメソッド：POST
- リクエストURL：`/contents/{雑誌ID}/update`
- 実行権限：管理者権限

### 処理内容
1. 「雑誌ID」を[雑誌サービスクラスの存在チェックメソッド](service-magazine.md#存在チェックメソッド（雑誌ID）)に渡し、指定した雑誌情報が存在するかチェックする。
    - 存在しない場合、[雑誌非存在例外](exception.md#雑誌非存在例外)を発生させる。発生した例外は[ハンドラメソッド](controller-contents.md#雑誌非存在例外ハンドラ)で処理する。
1. 入力チェックを行う。
    - エラーがある場合は[目次画面（当画面）のView](screen-contents.md#View名)を返す。
1. 複数の「雑誌ID」「セクション」「タイトル」「開始ページ」を[記事サービスクラスの更新メソッド](service-article.md#更新メソッド)に渡して、更新処理を実行する。
1. 更新処理の実行結果を比較する。
    - 成功した場合、[雑誌一覧画面のView](screen-magazinelist.md#View名)を返す。
    - 失敗した場合、[共通エラー画面のView]()を返す。

## 雑誌非存在例外ハンドラ
- 処理対象の例外：[雑誌非存在例外](exception.md#雑誌非存在例外)

### 処理内容
1. 画面に表示する[エラーメッセージ](exception.md#雑誌非存在例外)を定義する。
1. [共通エラー画面のView]()を返す。

