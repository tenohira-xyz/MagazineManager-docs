# 目次画面

## View名
`contentsList.html`

## 画面の表示権限
なし

## 基準URL
`/contents`

## 画面表示項目
### 匿名の場合
|項目|種類|入力チェック|概要|
|:--|:--|:--|:--|
|MagazineManager|リンク||雑誌一覧画面に遷移する。|
|ログイン|リンク||ログイン画面に遷移する。<br>ログイン後は雑誌一覧画面に遷移する。|
|目次|ラベル||タイトル|
|セクション|ラベル||一覧のヘッダ|
|タイトル|ラベル||一覧のヘッダ|
|開始ページ|ラベル||一覧のヘッダ|
|一覧の行|||一覧の件数分表示する。下記の表を参照。|
|戻る|リンク||雑誌一覧画面に遷移する。|

#### 一覧の各行に表示する項目
|項目|種類|入力チェック|概要|
|:--|:--|:--|:--|
|セクション|ラベル||システムから取得したセクションを表示する。|
|タイトル|ラベル||システムから取得したタイトルを表示する。|
|開始ページ|ラベル||システムから取得した開始ページを表示する。|

### 管理者の場合
|項目|種類|入力チェック|概要|
|:--|:--|:--|:--|
|MagazineManager|リンク||雑誌一覧画面に遷移する。|
|ログアウト|リンク||ログアウト処理を行う。<br>ログアウト後は雑誌一覧画面に遷移する。|
|目次|ラベル||タイトル|
|セクション|ラベル||一覧のヘッダ|
|タイトル|ラベル||一覧のヘッダ|
|開始ページ|ラベル||一覧のヘッダ|
|削除|ラベル||一覧のヘッダ|
|一覧の行|||一覧の件数分表示する。下記の表を参照。|
|追加|ボタン||一覧の一番下に入力欄を追加する。|
|登録|ボタン||目次を登録する。|
|戻る|リンク||雑誌一覧画面に遷移する。|
|エラーメッセージ|ラベル||登録処理前の入力チェックで、エラーメッセージがある場合表示する。|

#### 一覧の各行に表示する項目
|項目|種類|入力チェック|概要|
|:--|:--|:--|:--|
|セクション|テキストボックス|相関<br>文字列長|0～30文字入力可能。<br>セクションかタイトルのどちらか必須入力。|
|タイトル|テキストボックス|相関<br>文字列長|0～50文字入力可能。<br>セクションかタイトルのどちらか必須入力。|
|開始ページ|数値入力|必須入力<br>最大値<br>最小値<br>数値のみ|0～999。|
|削除|ボタン||対応する行の入力欄を削除する。|

## 動作

### 初期表示
#### 概要
目次画面を表示する。
- 区分：サーバ処理
- トリガー：GETリクエストを受信
- リクエストURL：`/contents/{雑誌ID}`
- 実行権限：全て

#### シナリオ
- 正常系
    - 目次画面を表示する。
- 異常系
    - 雑誌IDが未指定の場合、アクセス拒否する。
    - システム上に存在しない雑誌IDが指定された場合、エラーメッセージを設定してエラー画面に遷移する。

### ルートに遷移
#### 概要
システムのルート画面（雑誌一覧画面）に遷移する。
- 区分：画面遷移
- トリガー：**MagazineManagerリンク**が押されたとき
- リクエストURL：`/`
- 実行権限：全て

#### シナリオ
- 正常系
    - システムのルート画面に遷移する。
- 異常系
    - なし

### ログイン画面に遷移
#### 概要
ログイン画面に遷移する。
- 区分：画面遷移
- トリガー：**ログインリンク**が押されたとき
- リクエストURL：`/login`
- 実行権限：匿名

#### シナリオ
- 正常系
    - ログイン画面に遷移する。
- 異常系
    - なし

### ログアウト処理
#### 概要
共通のログアウト処理を呼び出す。
- 区分：サーバ処理
- トリガー：**ログアウトリンク**が押されたとき
- リクエストURL：`/logout`
- 実行権限：管理者権限

#### シナリオ
- 正常系
    - ログアウト処理を行う。
- 異常系
    - なし

### 一覧の入力欄を1行削除
#### 概要
対応する行の入力欄を削除する。
- 区分：サーバ処理
- トリガー：**削除ボタン**が押されたとき
- リクエストURL：`/contents/{雑誌ID}/edit`
- パラメータ：`remove`
- 実行権限：管理者権限

#### シナリオ
- 正常系
    - 対応する行の入力欄を削除する。
    - 一覧に1行しかない場合、入力欄は削除しない。
- 異常系
    - なし

### 一覧の入力欄を1行追加
#### 概要
一覧の一番下の行に入力欄を追加する。
- 区分：サーバ処理
- トリガー：**追加ボタン**が押されたとき
- リクエストURL：`/contents/{雑誌ID}/edit`
- パラメータ：`add`
- 実行権限：管理者権限

#### シナリオ
- 正常系
    - 一覧の一番下の行に入力欄を追加する。
- 異常系
    - なし

### 登録処理
#### 概要
目次を登録する。
- 区分：サーバ処理
- トリガー：**登録ボタン**が押されたとき
- リクエストURL：`/contents/{雑誌ID}/update`
- 実行権限：管理者権限

#### シナリオ
- 正常系
    - 目次を登録する。
- 異常系
    - ログインしていないまたはセッションが切れた場合、アクセス拒否する。
    - システム上に存在しない雑誌IDを指定された場合、エラーメッセージを設定してエラー画面に遷移する。

### 戻る
#### 概要
雑誌一覧画面に遷移する。
- 区分：画面遷移
- トリガー：**戻るリンク**が押されたとき
- リクエストURL：`/list`
- 実行権限：全て

#### シナリオ
- 正常系
    - 雑誌一覧画面に遷移する。
- 異常系
    - なし
