# 雑誌詳細画面

## View名
`detail.html`

## 画面の表示権限
なし

## 基準URL
`/detail/`

## 画面表示項目
### 匿名の場合
|項目|種類|入力チェック|概要|
|:--|:--|:--|:--|
|MagazineManager|リンク||雑誌一覧画面に遷移する。|
|ログイン|リンク||ログイン画面に遷移する。<br>ログイン後は雑誌一覧画面に遷移する。|
|雑誌登録|ラベル||タイトル|
|雑誌名|ラベル|||
|雑誌名|ラベル||システムから取得した雑誌名を表示する。|
|号数|ラベル|||
|号数|ラベル||システムから取得した号数を表示する。|
|出版社|ラベル|||
|出版社|ラベル||システムから取得した出版社を表示する。|
|発行日|ラベル|||
|発行日|ラベル||システムから取得した発行日を表示する。|
|戻る|リンク||雑誌一覧画面に遷移する。|

### 管理者の場合
|項目|種類|入力チェック|概要|
|:--|:--|:--|:--|
|MagazineManager|リンク||雑誌一覧画面に遷移する。|
|ログアウト|リンク||ログアウト処理を行う。<br>ログアウト後は雑誌一覧画面に遷移する。|
|雑誌登録|ラベル||タイトル|
|雑誌名|ラベル|||
|雑誌名|テキストボックス|必須入力<br>文字列長|システムから取得した雑誌名を表示する。<br>0～30文字入力可能。|
|号数|ラベル|||
|号数|テキストボックス|必須入力<br>文字列長|システムから取得した号数を表示する。<br>0～20文字入力可能。|
|出版社|テキストボックス|必須入力<br>文字列長|システムから取得した出版社を表示する。<br>0～20文字入力可能。|
|発行日|ラベル|||
|発行日|日付入力|必須入力<br>日付|システムから取得した発行日を表示する。|
|更新|ボタン||詳細情報を更新する。|
|戻る|リンク||雑誌一覧画面に遷移する。|
|エラーメッセージ|ラベル||更新処理前の入力チェックで、エラーメッセージがある場合表示する。|

## 動作

### 初期表示
#### 概要
雑誌詳細画面を表示する。
- 区分：サーバ処理
- トリガー：GETリクエストを受信
- リクエストURL：`/detail/{雑誌ID}`
- 実行権限：全て

#### シナリオ
- 正常系
    - 雑誌詳細画面を表示する。
- 異常系
    - 雑誌IDが未指定の場合、アクセス拒否する。
    - システム上に存在しない雑誌IDが指定された場合、エラーメッセージを設定してエラー画面に遷移する。

### ルートに遷移
#### 概要
システムのルート画面（雑誌一覧画面）に遷移する。
- 区分：画面遷移
- トリガー：**MagazineManagerリンク**が押されたとき
- リクエストURL：`/`
- 実行権限：全て

#### シナリオ
- 正常系
    - システムのルート画面に遷移する。
- 異常系
    - なし

### ログイン画面に遷移
#### 概要
ログイン画面に遷移する。
- 区分：画面遷移
- トリガー：**ログインリンク**が押されたとき
- リクエストURL：`/login`
- 実行権限：匿名

#### シナリオ
- 正常系
    - ログイン画面に遷移する。
- 異常系
    - なし

### ログアウト処理
#### 概要
共通のログアウト処理を呼び出す。
- 区分：サーバ処理
- トリガー：**ログアウトリンク**が押されたとき
- リクエストURL：`/logout`
- 実行権限：管理者権限

#### シナリオ
- 正常系
    - ログアウト処理を行う。
- 異常系
    - なし

### 登録処理
#### 概要
詳細情報を登録する。
- 区分：サーバ処理
- トリガー：**登録ボタン**が押されたとき
- リクエストURL：`/detail/{雑誌ID}/update`
- 実行権限：管理者権限

#### シナリオ
- 正常系
    - フォームに入力された内容をもとに雑誌の詳細情報を登録（更新）する。
    - 更新後は雑誌一覧画面に遷移する。
- 異常系
    - ログインしていないまたはセッションが切れた場合、アクセス拒否する。
    - システム上に存在しない雑誌IDを指定された場合、エラーメッセージを設定してエラー画面に遷移する。

### 戻る
#### 概要
雑誌一覧画面に遷移する。
- 区分：画面遷移
- トリガー：**戻るリンク**が押されたとき
- リクエストURL：`/list`
- 実行権限：全て

#### シナリオ
- 正常系
    - 雑誌一覧画面に遷移する。
- 異常系
    - なし

## エラーメッセージ

### 雑誌名
#### 未入力の場合
雑誌名が入力されていません。
#### 30文字以上入力された場合
雑誌名は30文字以内で入力してください。

### 号数
#### 未入力の場合
号数が入力されていません。
#### 20文字以上入力された場合
号数は20文字以内で入力してください。

### 出版社
#### 未入力の場合
出版社が入力されていません。
#### 20文字以上入力された場合
出版社は20文字以内で入力してください。

### 発行日
#### 未入力の場合
発行日が入力されていません。
#### 日付形式以外で入力された場合
発行日はyyyy/MM/dd形式で入力してください。

