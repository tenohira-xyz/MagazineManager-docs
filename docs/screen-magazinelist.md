# 雑誌一覧画面

## View名
`magazineList.html`

## 画面の表示権限
なし

## 基準URL
`/list`

## 画面表示項目
|項目|種類|表示区分|概要|
|:--|:--|:--|:--|
|MagazineManager|リンク||当画面に遷移する。|
|ログイン|リンク|匿名のみ|ログイン画面に遷移する。<br>ログイン後は当画面に遷移する。|
|ログアウト|リンク|管理者のみ|ログアウト処理を行う。<br>ログアウト後は当画面に遷移する。|
|雑誌一覧|ラベル||タイトル|
|雑誌登録|ボタン|管理者のみ|雑誌新規登録画面へ遷移する。|
|雑誌名|ラベル||一覧のヘッダ|
|号数|ラベル||一覧のヘッダ|
|詳細|ラベル||一覧のヘッダ|
|目次|ラベル||一覧のヘッダ|
|索引|ラベル||一覧のヘッダ|
|削除|ラベル|管理者のみ|一覧のヘッダ|
|一覧の行|||一覧の件数分表示する。下記の表を参照。|

### 一覧の各行に表示する項目
|項目|種類|表示区分|概要|
|:--|:--|:--|:--|
|雑誌名|ラベル||システムから取得した雑誌名を表示する。|
|号数|ラベル||システムから取得した号数を表示する。|
|詳細|リンク||雑誌詳細画面に遷移する。|
|目次|リンク||目次画面に遷移する。|
|索引|リンク||索引画面に遷移する。|
|削除|ボタン|管理者のみ|雑誌を削除する。|

## 動作

### 初期表示

#### 概要
雑誌一覧画面を表示する。
- 区分：サーバ処理
- トリガー：GETリクエストを受信
- リクエストURL：`/`, `/list`
- 実行権限：全て

#### シナリオ
- 正常系
    - 雑誌情報の一覧を取得して、画面に表示する。
- 異常系
    - なし

### ルートに遷移

#### 概要
システムのルート画面（雑誌一覧画面）に遷移する。
- 区分：画面遷移
- トリガー：**MagazineManagerリンク**が押されたとき
- リクエストURL：`/`
- 実行権限：全て

#### シナリオ
- 正常系
    - システムのルート画面に遷移する。
- 異常系
    - なし

### ログイン画面に遷移

#### 概要
ログイン画面に遷移する。
- 区分：画面遷移
- トリガー：**ログインリンク**が押されたとき
- リクエストURL：`/login`
- 実行権限：匿名

#### シナリオ
- 正常系
    - ログイン画面に遷移する。
- 異常系
    - なし

### ログアウト処理

#### 概要
共通のログアウト処理を呼び出す。
- 区分：サーバ処理
- トリガー：**ログアウトリンク**が押されたとき
- リクエストURL：`/logout`
- 実行権限：管理者権限

#### シナリオ
- 正常系
    - ログアウト処理を行う。
- 異常系
    - なし

### 雑誌登録画面に遷移

#### 概要
雑誌新規登録画面へ遷移する。
- 区分：画面遷移
- トリガー：**雑誌登録リンク**が押されたとき
- リクエストURL：`/register`
- 実行権限：管理者権限

#### シナリオ
- 正常系
    - 雑誌新規登録画面へ遷移する。
- 異常系
    - なし

### 詳細画面に遷移

#### 概要
雑誌詳細画面に遷移する。
- 区分：画面遷移
- トリガー：一覧各行の**詳細リンク**が押されたとき
- リクエストURL：`/detail/{雑誌ID}`
- 実行権限：全て

#### シナリオ
- 正常系
    - 雑誌詳細画面に遷移する。
- 異常系
    - なし

### 目次画面に遷移

#### 概要
目次画面に遷移する。
- 区分：画面遷移
- トリガー：一覧各行の**目次リンク**が押されたとき
- リクエストURL：`/contents/{雑誌ID}`
- 実行権限：全て

#### シナリオ
- 正常系
    - 目次画面に遷移する。
- 異常系
    - なし

### 索引画面に遷移

#### 概要
索引画面に遷移する。
- 区分：画面遷移
- トリガー：一覧各行の**索引リンク**が押されたとき
- リクエストURL：`/index/{雑誌ID}`
- 実行権限：全て

#### シナリオ
- 正常系
    - 索引画面に遷移する。
- 異常系
    - なし

### 削除処理

#### 概要
雑誌を削除する。
- 区分：サーバ処理
- トリガー：一覧各行の**削除ボタン**が押されたとき
- リクエストURL：`/list/delete/{雑誌ID}`
- 実行権限：管理者

#### シナリオ
- 正常系
    - 指定された雑誌IDを持つ雑誌の情報を削除する。
    - 指定された雑誌IDに対応する目次や索引の情報があれば、先に削除してから雑誌の情報を削除する。
- 異常系
    - ログインしていないまたはセッションが切れた場合、アクセス拒否する。
    - 雑誌IDが未指定の場合、アクセス拒否する。
    - システム上に存在しない雑誌IDを指定した場合、エラーメッセージを設定してエラー画面に遷移する。
